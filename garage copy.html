<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="stylemenu.css" />
  </head>
  <body>
    <div class="container-center">
      <div class="container text-center body text-white">
        <div class="text-white">
          <div class="row g-2 tinggi">
            <div
              class="col-md-6 offset-md-3 p-5 rounded shadow"
              style="
                background: linear-gradient(
                    rgba(0, 0, 0, 0.5),
                    rgba(0, 0, 0, 0.5)
                  ),
                  url('assets/bgmenu.jpg');
              "
            >
              <div class="row mb-3">
                <div class="col-6 col-md-3">
                  <img
                    onclick="location.href='menu.html'"
                    class="rounded img-fluid"
                    src="assets/menu/back.png"
                  />
                </div>
              </div>
              <div class="container py-4">
                <!-- Tambahkan di dalam <body> setelah <div class="row mb-3"> -->
                <div id="overviewTruck" class="mb-4">
                  <p class="text-white fw-semibold fs-4">Current Truck:</p>
                  <img
                    id="currentTruckImg"
                    src="assets/mobil/player/Truck1.png"
                    class="img-fluid rounded"
                    style="height: 120px"
                  />
                </div>

                <p class="text-center text-white mb-4 fw-semibold fs-4">
                  Select Truck
                </p>
                <div class="row g-4">
                  <!-- Level Card -->
                  <div class="row g-4">
                    <div class="col-sm-6 col-md-4 col-lg-3">
                      <img
                        class="img-fluid rounded mobil-option"
                        src="assets/mobil/player/Truck1.png"
                        data-nama="1"
                        data-src="assets/mobil/player/Truck1.png"
                      />
                    </div>

                    <div class="col-sm-6 col-md-4 col-lg-3">
                      <img
                        class="img-fluid rounded mobil-option"
                        src="assets/mobil/player/Truck2.png"
                        data-nama="2"
                        data-src="assets/mobil/player/Truck2.png"
                      />
                    </div>
                    <div class="col-sm-6 col-md-4 col-lg-3">
                      <img
                        class="img-fluid rounded mobil-option"
                        src="assets/mobil/player/Truck3.png"
                        data-nama="3"
                        data-src="assets/mobil/player/Truck3.png"
                      />
                    </div>
                    <div class="col-sm-6 col-md-4 col-lg-3">
                      <img
                        class="img-fluid rounded mobil-option"
                        src="assets/mobil/player/Truck4.png"
                        data-nama="4"
                        data-src="assets/mobil/player/Truck4.png"
                      />
                    </div>
                    <div class="col-sm-6 col-md-4 col-lg-3">
                      <img
                        class="img-fluid rounded mobil-option"
                        src="assets/mobil/player/Truck5.png"
                        data-nama="5"
                        data-src="assets/mobil/player/Truck5.png"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Pilih Mobil -->
    <div
      class="modal fade"
      id="mobilModal"
      tabindex="-1"
      aria-labelledby="mobilModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-white">
          <div class="modal-header">
            <h5 class="modal-title" id="mobilModalLabel">Pilih Truck Ini?</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body text-center">
            <img id="previewMobil" src="" class="img-fluid rounded" />
          </div>
          <div class="modal-footer justify-content-center">
            <img
              src="assets/menu/back.png"
              alt="Cancel"
              class="rounded"
              style="height: 50px; cursor: pointer"
              data-bs-dismiss="modal"
            />
            <img
              src="assets/menu/accept.png"
              alt="Equip"
              class="rounded"
              style="height: 50px; cursor: pointer"
              id="equipButton"
            />
          </div>
        </div>
      </div>
    </div>
  </body>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    let mobilDipilih = "";

    // Load truck dari localStorage saat halaman dimuat
    document.addEventListener("DOMContentLoaded", () => {
      const current = localStorage.getItem("mobilDipilih") || "1";
      document.getElementById(
        "currentTruckImg"
      ).src = `assets/mobil/player/Truck${current}.png`;
    });

    // Saat gambar diklik, tampilkan modal
    document.querySelectorAll(".mobil-option").forEach((img) => {
      img.addEventListener("click", () => {
        mobilDipilih = img.dataset.nama; // contoh: "1", "2", dst.
        const preview = document.getElementById("previewMobil");
        preview.src = img.dataset.src;

        const modal = new bootstrap.Modal(
          document.getElementById("mobilModal")
        );
        modal.show();
      });
    });

    // Saat tombol Equip diklik
    document.getElementById("equipButton").addEventListener("click", () => {
      localStorage.setItem("mobilDipilih", mobilDipilih);
      document.getElementById(
        "currentTruckImg"
      ).src = `assets/mobil/player/Truck${mobilDipilih}.png`;
      bootstrap.Modal.getInstance(document.getElementById("mobilModal")).hide();
    });
  </script>
</html>
